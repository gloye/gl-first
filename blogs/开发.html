<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>
  <div id="preview1" class="g-b g-b--t1of2 split split-preview">
    <div id="preview" preview="" debounce="150">
      <p>前面一篇文章我们介绍了H5滑动插件基本功能的开发，也就是让它通过手指操作实现逐屏滑动，仅此而已，这只是满足了我们 进行信息展示的基本需求，一个稍微完善的H5动画也需要一些内部元素的动画效果，现在我们就通过一些操作让这些元素动起来。 这次我们需要依赖一个动画类库。
      </p>
      <h2>
        <a id="animatecss_3"></a>animate.css</h2>
      <p><a href="https://daneden.github.io/animate.css/">animate.css</a>是一个依赖CSS3的动画样式文件，里面封装了大量的常用动画。 animate.css的使用非常简单，我们只需要在html里引用它，然后在需要执行动画的元素里添加你需要的动画类即可。如下：
      </p>
      <pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">h1</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"animated infinite bounce"</span>&gt;</span>Example<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
</code></pre>
      <p>其中<strong>animated</strong>类是必须的，<strong>infinite</strong>表示是否循环，<strong>bounce</strong>是你要执行的动画名称。</p>
      <p>animate.css的官方文档里也介绍了一些使用jQuery调用animate的方法</p>
      <pre><code class="language-javascript">$(<span class="hljs-string">'#yourElement'</span>).addClass(<span class="hljs-string">'animated bounceOutLeft'</span>);
<span class="hljs-comment">//回调方法</span>
$(<span class="hljs-string">'#yourElement'</span>).one(<span class="hljs-string">'webkitAnimationEnd'</span>, doSomething);
<span class="hljs-comment">//定义一个公共方法</span>
$.fn.extend({
    animateCss: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">animationName</span>) </span>{
        <span class="hljs-keyword">var</span> animationEnd = <span class="hljs-string">'webkitAnimationEnd animationend'</span>;
        <span class="hljs-keyword">this</span>.addClass(<span class="hljs-string">'animated '</span> + animationName).one(animationEnd, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            $(<span class="hljs-keyword">this</span>).removeClass(<span class="hljs-string">'animated '</span> + animationName);
        });
    }
});
$(<span class="hljs-string">'#yourElement'</span>).animateCss(<span class="hljs-string">'bounce'</span>);
</code></pre>
      <h2>
        <a id="dxsliderjsanimate_31"></a>在前面得dxslider.js里调用animate</h2>
      <p>在H5中调用animate可能比上面要少许复杂一点，因为我们需要考虑：</p>
      <ol>
        <li>动画是在翻页后执行而不是立即执行</li>
        <li>动画在同一页面内的执行顺序可能不同</li>
      </ol>
      <p>为了满足这两点需求，我们需要在html文件里加上两个自定义属性</p>
      <pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"page1"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"page"</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"animated"</span> <span class="hljs-attribute">data-animation</span>=<span class="hljs-value">"fadeInUp"</span> &gt;</span>animation1<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"animated"</span> <span class="hljs-attribute">data-animation</span>=<span class="hljs-value">"fadeInDown"</span> <span class="hljs-attribute">data-delay</span>=<span class="hljs-value">"400"</span>&gt;</span>animation2<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
      <p>这样我们就可以通过访问元素的data属性在适当的时候为元素赋予动画效果，如下面这样</p>
      <pre><code class="language-css"><span class="hljs-class">.animated</span><span class="hljs-rules">{
  <span class="hljs-rule"><span class="hljs-attribute">display</span>:<span class="hljs-value">none
</span></span></span>}
</code></pre>
      <pre><code class="language-javascript">
$(<span class="hljs-string">".current .animated"</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">if</span> ($<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'delay'</span>)) {
      <span class="hljs-built_in">window</span>.setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $<span class="hljs-keyword">this</span>.show().addClass($<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'animation'</span>));
      }, <span class="hljs-built_in">parseInt</span>($<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'delay'</span>), <span class="hljs-number">10</span>));
    } <span class="hljs-keyword">else</span> {
      $<span class="hljs-keyword">this</span>.show().addClass($<span class="hljs-keyword">this</span>.data(<span class="hljs-string">'animation'</span>));
    }
  })

</code></pre>
      <p>这样一来我们又会发现问题，只有首页的动画会有效果，因为当前的H5页面实际在一个文件中，而我们循环的是 整个H5动画中的元素，所以我们需要为该动画添加一个回调函数，也就是当翻页之后再执行当前页面的动画效果
      </p>
      <pre><code class="language-javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">animation</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">//上面的代码</span>
}

 $<span class="hljs-built_in">document</span>.on(<span class="hljs-string">'webkitAnimationEnd webkitTransitionEnd'</span>, <span class="hljs-string">'.page'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
   animation()
});

</code></pre>
<p>OK，现在我们的H5算是有那么点灵性了，但是，由于我们采用的伪翻页，这样每次翻页时的背景就都是最后一页， 那么，怎么去解决这个问题呢，这个和大家一起思考，下次再见~
        <a href="http://standuup.github.io/h5demo/">demo请戳</a></p>
      <iframe id="tmp_downloadhelper_iframe" style="display: none;"></iframe></div>
  </div>
</body>

</html>